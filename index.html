<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>WhatsDirect — Send WhatsApp without saving contact</title>
<meta name="description" content="Enter a phone number and open a WhatsApp chat without saving the contact." />

<link rel="stylesheet" href="style.css">

<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#25D366">



</head>


<body>
<main class="card" role="main">
<h1>WhatsDirect</h1>
<p class="lead">Type a phone number and open WhatsApp chat directly — no need to save the contact.</p>


<div class="row">
<div class="left">
<label class="small" for="cc">Country</label>
<select id="cc" aria-label="Country code">
<option value="91">+91 (India)</option>
<option value="1">+1 (USA)</option>
<option value="44">+44 (UK)</option>
<option value="61">+61 (Australia)</option>
<option value="971">+971 (UAE)</option>
<option value="">Other</option>
</select>
</div>
<div class="grow">
<label class="small" for="phone">Phone number</label>
<input id="phone" inputmode="numeric" placeholder="Enter phone number without leading zero or +" />
</div>
</div>


<label class="small" for="prefill">Message (optional)</label>
<textarea id="prefill" rows="2" placeholder="Hi — I want to connect with you..."></textarea>


<div class="actions">
<button id="openBtn" class="primary">Open in WhatsApp</button>
<button id="copyBtn" class="ghost">Copy Link</button>
<button id="newTabBtn" class="ghost">Open in new tab</button>
</div>

<div id="preview" class="link-preview" aria-live="polite">Link will appear here</div>


<div class="note small">Tip: For international numbers, choose correct country code and enter number without leading 0 or +. Example: India: <code>919876543210</code></div>


<footer>
<div id="status" class="small"></div>
</footer>
</main>


<script>
(function(){
const cc = document.getElementById('cc');
const phone = document.getElementById('phone');
const prefill = document.getElementById('prefill');
const preview = document.getElementById('preview');
const openBtn = document.getElementById('openBtn');
const copyBtn = document.getElementById('copyBtn');
const newTabBtn = document.getElementById('newTabBtn');
const status = document.getElementById('status');


function cleanNumber(v){
if(!v) return '';
// remove non digits
return v.replace(/\D+/g,'');
}


function buildLink(){
let country = cc.value || '';
let num = cleanNumber(phone.value);
if(country === ''){
// if user selected Other assume they typed full number including country code
// allow them to enter full international number
// if they didn't, just use the number as-is
// don't auto-prepend
} else {
// ensure number doesn't already start with country
if(num.startsWith(country)) {
// okay
} else {
num = country + num;
}
}


if(!/^[0-9]{6,15}$/.test(num)){
return null; // invalid
}


const text = encodeURIComponent(prefill.value || '');
const url = text ? `https://wa.me/${num}?text=${text}` : `https://wa.me/${num}`;
return url;
}

function updatePreview(){
const url = buildLink();
if(!url){
preview.innerHTML = '<span class="error">Enter a valid phone number (6–15 digits).</span>';
status.textContent = '';
return;
}
preview.innerHTML = `<strong>Link:</strong> <a href="${url}" target="_blank" rel="noopener">${url}</a>`;
status.textContent = '';
}

phone.addEventListener('input', updatePreview);
cc.addEventListener('change', updatePreview);
prefill.addEventListener('input', updatePreview);


openBtn.addEventListener('click', function(){
const url = buildLink();
if(!url){ status.textContent = 'Please enter a valid phone number.'; return; }
// Try to open via whatsapp:// on mobile for faster UX
const useApp = /Mobi|Android|iPhone/i.test(navigator.userAgent);
if(useApp){
// opening whatsapp native link; if it fails, browser will handle
const appUrl = url.replace('https://wa.me/','whatsapp://send?phone=');
// if text present, convert
// open app link first
window.location.href = appUrl;
// Also set a fallback to https after short delay in case app not installed
setTimeout(()=>{ window.location.href = url; }, 1200);
} else {
// Desktop: just open new tab
window.open(url,'_blank');
}
});

newTabBtn.addEventListener('click', function(){
const url = buildLink();
if(!url){ status.textContent = 'Please enter a valid phone number.'; return; }
window.open(url,'_blank');
});


copyBtn.addEventListener('click', async function(){
const url = buildLink();
if(!url){ status.textContent = 'Please enter a valid phone number.'; return; }
try{
await navigator.clipboard.writeText(url);
status.textContent = 'Link copied to clipboard.';
}catch(e){
// fallback
const ta = document.createElement('textarea'); ta.value = url; document.body.appendChild(ta); ta.select();
document.execCommand('copy'); document.body.removeChild(ta);
status.textContent = 'Link copied to clipboard.';
}
});


updatePreview();
})();

</script>

<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/service-worker.js')
    .then(() => console.log('ServiceWorker registered'))
    .catch(() => {});
}
</script>


</body>
</html>